generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model Product {
  id            String   @id @default(cuid())
  name          String
  // Using String for description to compatible with all DBs, if Text is needed ensure DB supports it
  description   String   
  price         Float
  // Simple inventory, optional
  quantity      Int      @default(0)
  imageUrl      String
  
  // Using JSON for arrays if needed, or simple Strings for demo
  // Postgres supports String[], but if we want max compatibility we could use JSON
  // Sticking to String[] as per previous plan for Postgres
  category      String?
  size          String[]
  color         String[]
  
  // Boolean for logic
  hasVariants   Boolean  @default(false)
  isPack        Boolean  @default(false) 

  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  orderItems    OrderItem[]
}

model Order {
  id              String      @id @default(cuid())
  
  // Customer Info (No User table)
  customerName    String
  customerPhone   String
  customerAddress String
  customerArea    String? // 'inside' | 'outside'

  // Order Info
  total           Float
  deliveryCharge  Float       @default(0)
  status          String      @default("PENDING") // PENDING, CONFIRMED, SHIPPED, DELIVERED, CANCELLED
  
  items           OrderItem[]

  createdAt       DateTime    @default(now())
  updatedAt       DateTime    @updatedAt
}

model OrderItem {
  id            String   @id @default(cuid())
  orderId       String
  order         Order    @relation(fields: [orderId], references: [id], onDelete: Cascade)
  
  productId     String
  product       Product  @relation(fields: [productId], references: [id])
  
  name          String   // Snapshot of product name
  price         Float    // Snapshot of price
  quantity      Int
  
  selectedSize  String?
  selectedColor String?
  imageUrl      String?

  createdAt     DateTime @default(now())
}
